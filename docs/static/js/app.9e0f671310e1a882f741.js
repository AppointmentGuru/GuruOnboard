webpackJsonp([1],{103:function(e,t){},104:function(e,t){},105:function(e,t){},107:function(e,t,i){var s=i(5)(i(81),i(114),null,null);e.exports=s.exports},108:function(e,t,i){var s=i(5)(i(82),i(113),null,null);e.exports=s.exports},109:function(e,t,i){i(105);var s=i(5)(i(83),i(118),"data-v-f0116760",null);e.exports=s.exports},110:function(e,t,i){var s=i(5)(i(84),i(116),null,null);e.exports=s.exports},111:function(e,t,i){i(104);var s=i(5)(i(85),i(117),null,null);e.exports=s.exports},112:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",e._l(e.errors,function(t){return e.errors?i("span",[e._v(e._s(t))]):e._e()}))},staticRenderFns:[]}},113:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{attrs:{id:"profile-contacts"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("strong",{staticStyle:{"line-height":"36px"}},[e._v(e._s(e.title))]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{loading:e.requestIsLoading(e.profileRequest),type:"primary"},on:{click:e.saveProfile}},[e._v(e._s(e.buttonText))])],1),e._v(" "),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.profileRequest),expression:"requestIsLoading(profileRequest)"}]},[i("h3",[e._v(e._s(e.contactDetailsHeader))]),e._v(" "),i("el-form-item",{attrs:{label:"Your name"}},[i("el-input",{model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Your e-mail"}},[i("el-input",{model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}})],1)],1)],1)},staticRenderFns:[]}},114:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("transition",{attrs:{name:"fade",mode:"out-in"}},[!1===e.loggedin?i("who-am-i",{key:"whoami",attrs:{id:"whoami"},on:{"whoami:loggedin":e.getMe,"whoami:registered":e.registered}}):!0===e.loggedin&&!1===e.customerDetails?i("customer-details",{key:"customerdetails",attrs:{buttonText:"Confirm details","initial-data":e.profile},on:{"customerdetails:profilesaved":function(t){e.customerDetails=!0}}}):!0===e.customerDetails&&!1===e.practiceDetails?i("practitioner-practice",{key:"practitioner-practice",attrs:{title:"Tell us a little about your practice","practitioner-id":e.profile.id,"initial-data":e.practice||{}},on:{"practice:saved":function(t){e.practiceDetails=!0}}}):i("donezo")],1)],1)},staticRenderFns:[]}},115:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"appointmentguruonboarder"}},[i("onboard")],1)},staticRenderFns:[]}},116:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{attrs:{id:"profile-form"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("strong",{staticStyle:{"line-height":"36px"}},[e._v("Your Practice")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{loading:e.requestIsLoading(e.updateProfileRequest),type:"primary"},on:{click:e.saveProfile}},[e._v("Save profile")])],1),e._v(" "),e.id?i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.updateProfileRequest),expression:"requestIsLoading(updateProfileRequest)"}]},[i("h3",[e._v(e._s(e.title))]),e._v(" "),i("el-form-item",{attrs:{label:"What is the name of your practice?"}},[i("el-input",{model:{value:e.profile.practice_name,callback:function(t){e.profile.practice_name=t},expression:"profile.practice_name"}}),e._v(" "),i("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"practice_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Please choose a sub-domain"}},[i("el-input",{model:{value:e.profile.sub_domain,callback:function(t){e.profile.sub_domain=t},expression:"profile.sub_domain"}},[i("template",{slot:"prepend"},[e._v("https://bookme.guru/")])],2),e._v(" "),i("el-form-item",{staticClass:"help-text",attrs:{label:"This will determine the url for your online booking page"}}),e._v(" "),i("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"sub_domain"}})],1),e._v(" "),i("h4",[e._v("\n      Visibility settings\n      "),i("el-tooltip",{attrs:{content:"You can always change these later from your settings page in the web app",placement:"right"}},[i("i",{staticClass:"el-icon-information"})])],1),e._v(" "),i("el-form-item",{attrs:{label:"Make my booking page available online"}},[i("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_website_published,callback:function(t){e.profile.is_website_published=t},expression:"profile.is_website_published"}}),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.profile.is_website_published,expression:"profile.is_website_published"}]},[i("span",[e._v(" Your site will be available at:\n        "),i("a",{attrs:{href:"https://bookme.guru/"+e.profile.sub_domain+"/",target:"_blank"}},[e._v("\n          https://bookme.guru/"+e._s(e.profile.sub_domain)+"/\n        ")])])])],1),e._v(" "),i("el-form-item",{attrs:{label:"Allow clients to book through the AppointmentGuru app"}},[i("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_visible_in_app,callback:function(t){e.profile.is_visible_in_app=t},expression:"profile.is_visible_in_app"}})],1)],1):i("el-alert",{attrs:{title:"No user specified, perhaps you need to login?"}})],1)},staticRenderFns:[]}},117:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{key:"whoami",attrs:{id:"whoami"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("strong",{staticStyle:{"line-height":"36px"}},[e._v("Let's get started")]),e._v(" "),"auth-register"===e.nextStep?i("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.registerRequest),type:"primary"},on:{click:e.performRegistration}},[e._v("Create account\n    ")]):"otp-auth"===e.nextStep?i("el-button",{staticClass:"action-button",attrs:{type:"primary"}},[e._v("Submit OTP\n    ")]):"token-auth"===e.nextStep?i("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.loginRequest),type:"primary"},on:{click:e.login}},[e._v("Login\n    ")]):i("span",[i("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.identifyRequest),type:"primary"},on:{click:e.getId}},[e._v("Next")])],1)],1),e._v(" "),i("el-form",[i("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.identifyRequest),expression:"requestIsLoading(identifyRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[i("i",{staticClass:"el-icon-loading"})]),e._v(" "),i("el-form-item",{attrs:{label:"What is your phone number?"}},[i("el-input",{on:{change:e.checkPhoneLength},model:{value:e.user.phoneNumber,callback:function(t){e.user.phoneNumber=t},expression:"user.phoneNumber"}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade"}},["auth-register"===e.nextStep?i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.registerRequest),expression:"requestIsLoading(registerRequest)"}]},[i("h3",[e._v(e._s(e.createAccountHeader))]),e._v(" "),i("el-form-item",{attrs:{label:"Your full name?"}},[i("el-input",{model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"E-mail"}},[i("el-input",{model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Pick a password"}},[i("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1)],1):e._e()],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:"auth-otp"===e.nextStep||!0===e.showOTP,expression:'nextStep === "auth-otp" || showOTP === true'}]},[i("h3",[e._v(e._s(e.otpHeader))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.validateOtpRequest),expression:"requestIsLoading(validateOtpRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[i("i",{staticClass:"el-icon-loading"})]),e._v(" "),i("el-form-item",{attrs:{label:"Please enter your OTP"}},[i("el-input",{on:{change:e.checkOTPLength},model:{value:e.user.otp,callback:function(t){e.user.otp=t},expression:"user.otp"}})],1)],1)],1),e._v(" "),i("transition",{attrs:{name:"fade"}},["token-auth"===e.nextStep?i("el-form",[i("h3",[e._v(e._s(e.loginHeader))]),e._v(" "),i("el-form-item",{attrs:{label:"Please enter your password"}},[i("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}}),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.showOTP=!0}}},[e._v("Forgot password")])],1)],1):e._e()],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:"set-password"===e.nextStep,expression:'nextStep === "set-password"'}]},[i("el-form-item",{attrs:{label:"Please set your password"}},[i("h3",[e._v(e._s(e.createPasswordHeader))]),e._v(" "),i("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1)],1)],1)],1)},staticRenderFns:[]}},118:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",[i("center",[i("h3",[e._v("You're good to go!")]),e._v(" "),i("p",[i("i",{staticClass:"el-icon-circle-check\n",staticStyle:{"font-size":"64px",color:"green"}})]),e._v(" "),i("p"),i("p",[e._v("Now you can start adding appointments in the web app")]),e._v(" "),e.loading?i("div",[i("i",{staticClass:"el-icon-loading"}),e._v(" Opening AppointmentGuru\n    ")]):i("div",{staticClass:"a-button"},[i("a",{attrs:{href:"http://portal.appointmentguru.co/"},on:{click:function(t){e.loading=!0}}},[e._v("Visit Web App")])]),e._v(" "),i("p")])],1)},staticRenderFns:[]}},18:function(e,t,i){var s=i(5)(i(79),i(112),null,null);e.exports=s.exports},34:function(e,t){},35:function(e,t,i){i(103);var s=i(5)(i(80),i(115),null,null);e.exports=s.exports},78:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(35),a=i.n(r),n=i(33),o=i.n(n),u=i(34),l=(i.n(u),i(37)),p=i(36),c=[{name:"appointmentguru",class:p.a}];s.default.use(l.a,c),s.default.use(o.a),s.default.config.productionTip=!1,new s.default({el:"#appointmentguruonboarder",template:"<App/>",components:{App:a.a}})},79:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"FieldErrorMessage",props:{request:{required:!0},field:{required:!0,type:String}},computed:{errors:function(){return!(200===this.request.status||!this.request.result||!this.request.result.data)&&this.request.result.data[this.field]}}}},80:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(107),r=i.n(s);t.default={name:"appointmentguruonboarder",components:{Onboard:r.a}}},81:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),r=i(111),a=i.n(r),n=i(110),o=i.n(n),u=i(108),l=i.n(u),p=i(109),c=i.n(p);t.default={name:"Onboard",mixins:[s.a],components:{WhoAmI:a.a,PractitionerPractice:o.a,CustomerDetails:l.a,Donezo:c.a},data:function(){return{imageUrl:null,loggedin:!1,customerDetails:!1,practiceDetails:!1}},computed:{meRequest:function(){return this.$requeststore.getters.getRequestById("me-request")},getUser:function(){return-1!==this.meRequest&&this.meRequest.result&&this.meRequest.result.data&&this.meRequest.result.data.results?this.meRequest.result.data.results[0]:{profile:{}}},profile:function(){var e=this.getUser;return{id:e.id,fullName:e.first_name+" "+e.last_name,email:e.email,phoneNumber:e.phone_number,is_practitioner:!0}},practice:function(){var e=this.getUser;if(e.profile)return{sub_domain:e.profile.sub_domain,practice_name:e.profile.practice_name,is_website_published:e.profile.is_website_published,is_visible_in_app:e.profile.is_visible_in_app}}},methods:{registered:function(){this.customerDetails=!0,this.loggedin=!0,this.$appointmentguru.resource("practitioner.me").id("me-request").list()},getMe:function(){this.loggedin=!0,this.$appointmentguru.resource("practitioner.me").id("me-request").list()}}}},82:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),r=i(18),a=i.n(r);t.default={name:"CustomerDetails",mixins:[s.a],components:{FieldErrorMessages:a.a},props:{title:{type:String,default:"Contact details"},buttonText:{type:String,default:"Save contact details"},initialData:{type:Object,default:function(){return{}}},contactDetailsHeader:{type:String,default:"Please confirm that your contact details are correct"}},data:function(){return{user:{first_name:null,last_name:null,email:null,fullName:null,is_practitioner:!0}}},mounted:function(){this.user=this.initialData},watch:{initialData:function(){200!==this.profileRequestStatus&&(this.user.first_name||(this.user=this.initialData))},profileRequestStatus:function(){200===this.profileRequestStatus&&this.$emit("customerdetails:profilesaved",this.profile)}},computed:{profileRequest:function(){return this.$requeststore.getters.getRequestById("profile-update")},profileRequestStatus:function(){return-1===this.profileRequest?0:this.profileRequest.status}},methods:{saveProfile:function(){this.user.first_name=this.user.fullName.split(" ").slice(0,-1).join(" "),this.user.last_name=this.user.fullName.split(" ").slice(-1).join(" "),this.$appointmentguru.resource("users").id("profile-update").save(this.user.id,this.user)}}}},83:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Donezo",data:function(){return{loading:!1}}}},84:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),r=i(18),a=i.n(r);t.default={name:"Temp",mixins:[s.a],components:{FieldErrorMessages:a.a},props:{practitionerId:{type:Number,required:!0},title:{type:String,default:"Details for your practice"},initialData:{type:Object,default:function(){return{}}}},data:function(){return{id:this.practitionerId,profile:{touched:null,sub_domain:null,practice_name:null,is_website_published:null,is_visible_in_app:null}}},mounted:function(){this.profile=this.initialData},watch:{updateProfileRequestStatus:function(){200===this.updateProfileRequestStatus&&this.$emit("practice:saved",this.profile)},practiceName:function(){this.profile.sub_domain=this._slugify(this.practiceName)},practitionerId:function(){this.id=this.practitionerId},initialData:function(){this.profile.touched||(this.profile=this.initialData)}},computed:{practiceName:function(){return this.profile.practice_name},updateProfileRequest:function(){return this.$requeststore.getters.getRequestById("update-profile-request")},updateProfileRequestStatus:function(){return-1!==this.updateProfileRequest?this.updateProfileRequest.status:0}},methods:{_slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},saveProfile:function(){this.profile.touched=!0,this.$appointmentguru.resource("practitioner.me.profile").id("update-profile-request").save(this.id,this.profile)}}}},85:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),r=i(18),a=i.n(r);t.default={name:"WhoAmI",mixins:[s.a],components:{FieldErrorMessages:a.a},props:{initialData:{type:Object,default:function(){return{}}},otpHeader:{type:String,default:"Please enter your OTP"},createPasswordHeader:{type:String,default:"Please choose a password"},createAccountHeader:{type:String,default:"Tell us a little about yourself"},loginHeader:{type:String,default:"Please login"}},data:function(){return{showOTP:!1,user:{phoneNumber:"+27"}}},watch:{loginRequestStatus:function(){if(200===this.loginRequestStatus){var e=this.loginRequest.result.data.token;this.setToken(e),this.$emit("whoami:loggedin")}},validateOtpRequestStatus:function(){if(200===this.validateOtpRequestStatus){var e=this.validateOtpRequest.result.data.token;this.setToken(e),this.$emit("whoami:loggedin")}},registerRequestStatus:function(){if(200===this.registerRequestStatus){var e=this.registerRequest.result.data.token;this.setToken(e),this.$emit("whoami:registered")}}},computed:{identifyRequest:function(){return this.$requeststore.getters.getRequestById("auth-identify-request")},loginRequest:function(){return this.$requeststore.getters.getRequestById("auth-login-request")},loginRequestStatus:function(){var e=this.loginRequest;return-1===e?0:e.status},validateOtpRequest:function(){return this.$requeststore.getters.getRequestById("auth-validate-otp")},validateOtpRequestStatus:function(){var e=this.validateOtpRequest;return-1===e?0:e.status},registerRequest:function(){return this.$requeststore.getters.getRequestById("auth-register")},registerRequestStatus:function(){var e=this.registerRequest;return-1===e?0:e.status},nextStep:function(){return-1!==this.identifyRequest&&this.identifyRequest.result&&this.identifyRequest.result.data?this.identifyRequest.result.data.type:null}},methods:{getId:function(){var e={id:"auth-identify-request",params:{phone_number:this.user.phoneNumber}};this.$appointmentguru.endpoint("auth-identify",e)},checkPhoneLength:function(){12===this.user.phoneNumber.length&&this.getId()},checkOTPLength:function(){4===this.user.otp.length&&this.validateOTP()},login:function(){var e={id:"auth-login-request",data:{phone_number:this.user.phoneNumber,password:this.user.password}};this.$appointmentguru.endpoint("auth-login-phone",e)},validateOTP:function(){var e={id:"auth-validate-otp",data:{phone_number:this.user.phoneNumber,otp:this.user.otp}};this.$appointmentguru.endpoint("auth-validate-otp",e)},autoLogin:function(){this.user.phoneNumber="+27...",this.user.password="...",this.login()},setToken:function(e){var t=[this.$appointmentguru.name,"Authorization","token "+e];this.$requeststore.commit("BACKEND_CONFIG_SET_HEADER",t)},performRegistration:function(){var e={id:"auth-register",data:{phone_number:this.user.phoneNumber,password1:this.user.password,password2:this.user.password,full_name:this.user.fullName,email:this.user.email,is_practitioner:!0}};this.$appointmentguru.endpoint("auth-register",e)}}}}},[78]);
//# sourceMappingURL=app.9e0f671310e1a882f741.js.map