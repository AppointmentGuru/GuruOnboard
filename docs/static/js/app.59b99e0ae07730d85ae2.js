webpackJsonp([1],{103:function(e,t){},104:function(e,t){},105:function(e,t){},106:function(e,t){},108:function(e,t,s){s(103);var i=s(5)(s(81),s(115),null,null);e.exports=i.exports},109:function(e,t,s){var i=s(5)(s(82),s(114),null,null);e.exports=i.exports},110:function(e,t,s){s(106);var i=s(5)(s(83),s(119),"data-v-f0116760",null);e.exports=i.exports},111:function(e,t,s){var i=s(5)(s(84),s(117),null,null);e.exports=i.exports},112:function(e,t,s){s(105);var i=s(5)(s(85),s(118),null,null);e.exports=i.exports},113:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.errors?s("div",{class:e.errorClass+"-container"},e._l(e.errors,function(t){return s("div",{class:e.errorClass},[e._v("\n      "+e._s(t)+"\n    ")])})):e._e()])},staticRenderFns:[]}},114:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{attrs:{id:"profile-contacts"}},[s("div",{staticClass:"clearfix",slot:"header"},[s("strong",{staticClass:"card-header"},[e._v(e._s(e.title))]),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{loading:e.requestIsLoading(e.profileRequest),type:"primary"},on:{click:e.saveProfile}},[e._v(e._s(e.buttonText))])],1),e._v(" "),s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.profileRequest),expression:"requestIsLoading(profileRequest)"}]},[s("h3",[e._v(e._s(e.contactDetailsHeader))]),e._v(" "),s("el-form-item",{attrs:{label:"Your name"}},[s("el-input",{model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.profileRequest,field:"first_name"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.profileRequest,field:"last_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Your e-mail"}},[s("el-input",{model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.profileRequest,field:"email"}})],1)],1)],1)},staticRenderFns:[]}},115:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"onboarder"}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[!1===e.loggedin?s("who-am-i",{key:"whoami",attrs:{id:"whoami"},on:{"whoami:loggedin":e.setPractitioner,"whoami:registered":e.registered}}):!0===e.loggedin&&!1===e.customerDetails?s("customer-details",{key:"customerdetails",attrs:{buttonText:"Confirm details","initial-data":e.profile},on:{"customerdetails:profilesaved":function(t){e.customerDetails=!0}}}):!0===e.customerDetails&&!1===e.practiceDetails?s("practitioner-practice",{key:"practitioner-practice",attrs:{title:"Tell us a little about your practice","practitioner-id":e.profile.id,"initial-data":e.practice||{}},on:{"practice:saved":function(t){e.practiceDetails=!0}}}):s("donezo")],1)],1)},staticRenderFns:[]}},116:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"appointmentguruonboarder"}},[s("onboard")],1)},staticRenderFns:[]}},117:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{attrs:{id:"profile-form"}},[s("div",{staticClass:"clearfix",slot:"header"},[s("strong",{staticClass:"card-header"},[e._v("Your Practice")]),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{loading:e.requestIsLoading(e.updateProfileRequest),type:"primary"},on:{click:e.saveProfile}},[e._v("Save profile")])],1),e._v(" "),e.id?s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.updateProfileRequest),expression:"requestIsLoading(updateProfileRequest)"}]},[s("h3",[e._v(e._s(e.title))]),e._v(" "),s("el-form-item",{attrs:{label:"What is the name of your practice?"}},[s("el-input",{model:{value:e.profile.practice_name,callback:function(t){e.profile.practice_name=t},expression:"profile.practice_name"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"practice_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Please choose a sub-domain"}},[s("el-input",{model:{value:e.profile.sub_domain,callback:function(t){e.profile.sub_domain=t},expression:"profile.sub_domain"}},[s("template",{slot:"prepend"},[e._v("https://bookme.guru/")])],2),e._v(" "),s("el-form-item",{staticClass:"help-text",attrs:{label:"This will determine the url for your online booking page"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"sub_domain"}})],1),e._v(" "),s("h4",[e._v("\n      Visibility settings\n      "),s("el-tooltip",{attrs:{content:"You can always change these later from your settings page in the web app",placement:"right"}},[s("i",{staticClass:"el-icon-information"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"Make my booking page available online"}},[s("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_website_published,callback:function(t){e.profile.is_website_published=t},expression:"profile.is_website_published"}}),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.profile.is_website_published,expression:"profile.is_website_published"}]},[s("span",[e._v(" Your site will be available at:\n        "),s("a",{attrs:{href:"https://bookme.guru/"+e.profile.sub_domain+"/",target:"_blank"}},[e._v("\n          https://bookme.guru/"+e._s(e.profile.sub_domain)+"/\n        ")])])])],1),e._v(" "),s("el-form-item",{attrs:{label:"Allow clients to book through the AppointmentGuru app"}},[s("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_visible_in_app,callback:function(t){e.profile.is_visible_in_app=t},expression:"profile.is_visible_in_app"}})],1)],1):s("el-alert",{attrs:{title:"No user specified, perhaps you need to login?"}})],1)},staticRenderFns:[]}},118:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{key:"whoami",attrs:{id:"whoami"}},[s("div",{staticClass:"clearfix",slot:"header"},[s("strong",{staticClass:"card-header"},[e._v("Let's get started")]),e._v(" "),"auth-register"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.registerRequest),type:"primary"},on:{click:e.performRegistration}},[e._v("Create account\n    ")]):e.showSetPassword?s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.setPasswordRequest),type:"primary"},on:{click:e.setPassword}},[e._v("Set password\n    ")]):"otp-auth"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.validateOtpRequest),type:"primary"},on:{click:e.validateOTP}},[e._v("Submit OTP\n    ")]):"token-auth"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.loginRequest),type:"primary"},on:{click:e.login}},[e._v("Login\n    ")]):s("span",[s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.identifyRequest),type:"primary"},on:{click:e.getId}},[e._v("Next")])],1)],1),e._v(" "),s("el-form",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.identifyRequest),expression:"requestIsLoading(identifyRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[s("i",{staticClass:"el-icon-loading"})]),e._v(" "),s("el-form-item",{attrs:{label:"What is your phone number?"}},[s("el-input",{on:{change:e.checkPhoneLength},model:{value:e.user.phoneNumber,callback:function(t){e.user.phoneNumber=t},expression:"user.phoneNumber"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"phone_number"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.loginRequest,field:"phone_number"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.identifyRequest,field:"phone_number"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.validateOtpRequest,field:"phone_number"}})],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["auth-register"===e.nextStep?s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.registerRequest),expression:"requestIsLoading(registerRequest)"}]},[s("h3",[e._v(e._s(e.createAccountHeader))]),e._v(" "),s("el-form-item",{attrs:{label:"Full name"}},[s("el-input",{model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"first_name"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"last_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"E-mail"}},[s("el-input",{model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Pick a password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"password1"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.registerRequest,field:"password2"}})],1)],1):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:"auth-otp"===e.nextStep||!0===e.showOTP,expression:'nextStep === "auth-otp" || showOTP === true'}]},[s("h3",[e._v(e._s(e.otpHeader))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.validateOtpRequest),expression:"requestIsLoading(validateOtpRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[s("i",{staticClass:"el-icon-loading"})]),e._v(" "),s("el-form-item",{attrs:{label:"Please enter your OTP"}},[s("el-input",{on:{change:e.checkOTPLength},model:{value:e.user.otp,callback:function(t){e.user.otp=t},expression:"user.otp"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.validateOtpRequest,field:"otp"}})],1)],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["token-auth"===e.nextStep?s("el-form",[s("h3",[e._v(e._s(e.loginHeader))]),e._v(" "),s("el-form-item",{attrs:{label:"Please enter your password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}}),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.showOTP=!0}}},[e._v("Forgot password")])],1)],1):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.showSetPassword?s("el-form",[s("h3",[e._v(e._s(e.createPasswordHeader))]),e._v(" "),s("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.setPasswordRequest),expression:"requestIsLoading(setPasswordRequest)"}],attrs:{label:"Password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.setPasswordRequest,field:"password"}})],1)],1):e._e()],1)],1)},staticRenderFns:[]}},119:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("center",[s("h3",[e._v("You're good to go!")]),e._v(" "),s("p",[s("i",{staticClass:"el-icon-circle-check\n",staticStyle:{"font-size":"64px",color:"green"}})]),e._v(" "),s("p"),s("p",[e._v("Now you can start adding appointments in the web app")]),e._v(" "),e.loading?s("div",[s("i",{staticClass:"el-icon-loading"}),e._v(" Opening AppointmentGuru\n    ")]):s("div",{staticClass:"a-button"},[s("a",{attrs:{href:"http://portal.appointmentguru.co/"},on:{click:function(t){e.loading=!0}}},[e._v("Visit Web App")])]),e._v(" "),s("p")])],1)},staticRenderFns:[]}},18:function(e,t,s){var i=s(5)(s(79),s(113),null,null);e.exports=i.exports},34:function(e,t){},35:function(e,t,s){s(104);var i=s(5)(s(80),s(116),null,null);e.exports=i.exports},78:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(2),r=s(35),a=s.n(r),n=s(33),o=s.n(n),u=s(34),l=(s.n(u),s(37)),p=s(36),d=[{name:"appointmentguru",class:p.a}];i.default.use(l.a,d),i.default.use(o.a),i.default.config.productionTip=!1,new i.default({el:"#appointmentguruonboarder",template:"<App/>",components:{App:a.a}})},79:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"FieldErrorMessage",props:{request:{required:!0},field:{required:!0,type:String},errorClass:{type:String,default:"error"}},computed:{errors:function(){return!(200===this.request.status||!this.request.result||!this.request.result.data)&&this.request.result.data[this.field]}}}},80:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(108),r=s.n(i);t.default={name:"appointmentguruonboarder",components:{Onboard:r.a}}},81:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(8),r=s(112),a=s.n(r),n=s(111),o=s.n(n),u=s(109),l=s.n(u),p=s(110),d=s.n(p);t.default={name:"Onboard",mixins:[i.a],components:{WhoAmI:a.a,PractitionerPractice:o.a,CustomerDetails:l.a,Donezo:d.a},data:function(){return{imageUrl:null,loggedin:!1,customerDetails:!1,practiceDetails:!1}},watch:{makePractitionerRequestStatus:function(){200===this.makePractitionerRequestStatus&&this.getMe()}},computed:{meRequest:function(){return this.$requeststore.getters.getRequestById("me-request")},makePractitionerRequest:function(){return this.$requeststore.getters.getRequestById("make-practitioner-request")},makePractitionerRequestStatus:function(){return this.makePractitionerRequest.status},getUser:function(){return-1!==this.meRequest&&this.meRequest.result&&this.meRequest.result.data&&this.meRequest.result.data.results?this.meRequest.result.data.results[0]:{profile:{}}},profile:function(){var e=this.getUser;return{id:e.id,fullName:e.first_name+" "+e.last_name,email:e.email,phoneNumber:e.phone_number,is_practitioner:!0}},practice:function(){var e=this.getUser;if(e.profile)return{sub_domain:e.profile.sub_domain,practice_name:e.profile.practice_name,is_website_published:e.profile.is_website_published,is_visible_in_app:e.profile.is_visible_in_app}}},methods:{registered:function(){this.customerDetails=!0,this.loggedin=!0,this.$appointmentguru.resource("practitioner.me").id("me-request").list()},setPractitioner:function(){var e={is_practitioner:!0};this.$appointmentguru.resource("users").id("make-practitioner-request").save("me",e)},getMe:function(){this.loggedin=!0,this.$appointmentguru.resource("practitioner.me").id("me-request").list()}}}},82:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(8),r=s(18),a=s.n(r);t.default={name:"CustomerDetails",mixins:[i.a],components:{FieldErrorMessages:a.a},props:{title:{type:String,default:"Contact details"},buttonText:{type:String,default:"Save contact details"},initialData:{type:Object,default:function(){return{}}},contactDetailsHeader:{type:String,default:"Please confirm that your contact details are correct"}},data:function(){return{user:{first_name:null,last_name:null,email:null,fullName:null,is_practitioner:!0}}},mounted:function(){this.user=this.initialData},watch:{initialData:function(){200!==this.profileRequestStatus&&(this.user.first_name||(this.user=this.initialData))},profileRequestStatus:function(){200===this.profileRequestStatus&&this.$emit("customerdetails:profilesaved",this.profile)}},computed:{profileRequest:function(){return this.$requeststore.getters.getRequestById("profile-update")},profileRequestStatus:function(){return-1===this.profileRequest?0:this.profileRequest.status}},methods:{saveProfile:function(){this.user.first_name=this.user.fullName.split(" ").slice(0,-1).join(" "),this.user.last_name=this.user.fullName.split(" ").slice(-1).join(" "),this.$appointmentguru.resource("users").id("profile-update").save(this.user.id,this.user)}}}},83:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Donezo",data:function(){return{loading:!1}}}},84:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(8),r=s(18),a=s.n(r);t.default={name:"Temp",mixins:[i.a],components:{FieldErrorMessages:a.a},props:{practitionerId:{type:Number,required:!0},title:{type:String,default:"Details for your practice"},initialData:{type:Object,default:function(){return{}}}},data:function(){return{id:this.practitionerId,profile:{touched:null,sub_domain:null,practice_name:null,is_website_published:null,is_visible_in_app:null}}},mounted:function(){this.profile=this.initialData},watch:{updateProfileRequestStatus:function(){200===this.updateProfileRequestStatus&&this.$emit("practice:saved",this.profile)},practiceName:function(){this.profile.sub_domain=this._slugify(this.practiceName)},practitionerId:function(){this.id=this.practitionerId},initialData:function(){this.profile.touched||(this.profile=this.initialData)}},computed:{practiceName:function(){return this.profile.practice_name},updateProfileRequest:function(){return this.$requeststore.getters.getRequestById("update-profile-request")},updateProfileRequestStatus:function(){return-1!==this.updateProfileRequest?this.updateProfileRequest.status:0}},methods:{_slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},saveProfile:function(){this.profile.touched=!0,this.$appointmentguru.resource("practitioner.me.profile").id("update-profile-request").save(this.id,this.profile)}}}},85:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(8),r=s(18),a=s.n(r);t.default={name:"WhoAmI",mixins:[i.a],components:{FieldErrorMessages:a.a},props:{initialData:{type:Object,default:function(){return{}}},otpHeader:{type:String,default:"Please enter your OTP"},createPasswordHeader:{type:String,default:"Please choose a password"},createAccountHeader:{type:String,default:"Tell us a little about yourself"},loginHeader:{type:String,default:"Please login"}},data:function(){return{showOTP:!1,showSetPassword:!1,user:{phoneNumber:"+27"}}},watch:{loginRequestStatus:function(){if(200===this.loginRequestStatus){var e=this.loginRequest.result.data.token;this.setToken(e),this.$emit("whoami:loggedin")}},validateOtpRequestStatus:function(){if(200===this.validateOtpRequestStatus){var e=this.validateOtpRequest.result.data.token;this.setToken(e),this.showSetPassword=!0}},setPasswordRequestStatus:function(){200===this.setPasswordRequestStatus&&this.$emit("whoami:loggedin")},registerRequestStatus:function(){if(200===this.registerRequestStatus){var e=this.registerRequest.result.data.token;this.setToken(e),this.$emit("whoami:registered")}}},computed:{identifyRequest:function(){return this.$requeststore.getters.getRequestById("auth-identify-request")},loginRequest:function(){return this.$requeststore.getters.getRequestById("auth-login-request")},loginRequestStatus:function(){var e=this.loginRequest;return-1===e?0:e.status},validateOtpRequest:function(){return this.$requeststore.getters.getRequestById("auth-validate-otp")},validateOtpRequestStatus:function(){var e=this.validateOtpRequest;return-1===e?0:e.status},setPasswordRequest:function(){return this.$requeststore.getters.getRequestById("auth-set-password")},setPasswordRequestStatus:function(){var e=this.setPasswordRequest;return-1===e?0:e.status},registerRequest:function(){return this.$requeststore.getters.getRequestById("auth-register")},registerRequestStatus:function(){var e=this.registerRequest;return-1===e?0:e.status},nextStep:function(){return-1!==this.identifyRequest&&this.identifyRequest.result&&this.identifyRequest.result.data?this.identifyRequest.result.data.type:null}},methods:{getId:function(){var e={id:"auth-identify-request",params:{phone_number:this.user.phoneNumber}};this.$appointmentguru.endpoint("auth-identify",e)},checkPhoneLength:function(){12===this.user.phoneNumber.length&&this.getId()},checkOTPLength:function(){4===this.user.otp.length&&this.validateOTP()},login:function(){var e={id:"auth-login-request",data:{phone_number:this.user.phoneNumber,password:this.user.password}};this.$appointmentguru.endpoint("auth-login-phone",e)},validateOTP:function(){var e={id:"auth-validate-otp",data:{phone_number:this.user.phoneNumber,otp:this.user.otp}};this.$appointmentguru.endpoint("auth-validate-otp",e)},setToken:function(e){var t=[this.$appointmentguru.name,"Authorization","token "+e];this.$requeststore.commit("BACKEND_CONFIG_SET_HEADER",t)},performRegistration:function(){var e={id:"auth-register",data:{phone_number:this.user.phoneNumber,password1:this.user.password,password2:this.user.password,full_name:this.user.fullName,email:this.user.email,is_practitioner:!0}};this.$appointmentguru.endpoint("auth-register",e)},setPassword:function(){var e={id:"auth-set-password",data:{password:this.user.password}};this.$appointmentguru.endpoint("auth-set-password",e)}}}}},[78]);
//# sourceMappingURL=app.59b99e0ae07730d85ae2.js.map