webpackJsonp([1],{101:function(e,t){},102:function(e,t){},104:function(e,t,s){var i=s(6)(s(81),s(108),null,null);e.exports=i.exports},105:function(e,t,s){var i=s(6)(s(82),s(110),null,null);e.exports=i.exports},106:function(e,t,s){s(102);var i=s(6)(s(83),s(111),null,null);e.exports=i.exports},107:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",e._l(e.errors,function(t){return e.errors?s("span",[e._v(e._s(t))]):e._e()}))},staticRenderFns:[]}},108:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("transition",{attrs:{name:"fade",mode:"out-in"}},[-1===e.meRequest||200!==e.meRequest.status?s("who-am-i",{key:"whoami",attrs:{id:"whoami"},on:{"whoami:loggedin":e.getMe}}):s("practitioner-practice",{key:"practitioner-practice"})],1)],1)},staticRenderFns:[]}},109:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"appointmentguruonboarder"}},[s("onboard")],1)},staticRenderFns:[]}},110:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{key:"profile",attrs:{id:"profile-form"}},[s("div",{staticClass:"clearfix",slot:"header"},[s("strong",{staticStyle:{"line-height":"36px"}},[e._v("Your Practice")]),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{loading:e.requestIsLoading(e.updateProfileRequest),type:"primary"},on:{click:e.saveProfile}},[e._v("Save profile")])],1),e._v(" "),s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.requestIsLoading(e.updateProfileRequest),expression:"requestIsLoading(updateProfileRequest)"}]},[s("el-form-item",{attrs:{label:"What is the name of your practice?"}},[s("el-input",{model:{value:e.profile.practice_name,callback:function(t){e.profile.practice_name=t},expression:"profile.practice_name"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"practice_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Please choose a sub-domain"}},[s("el-input",{model:{value:e.profile.sub_domain,callback:function(t){e.profile.sub_domain=t},expression:"profile.sub_domain"}},[s("template",{slot:"prepend"},[e._v("https://bookme.guru/")])],2),e._v(" "),s("el-form-item",{staticClass:"help-text",attrs:{label:"This will determine the url for your online booking page"}}),e._v(" "),s("field-error-messages",{attrs:{request:e.updateProfileRequest,field:"sub_domain"}})],1),e._v(" "),s("h4",[e._v("\n      Visibility settings\n      "),s("el-tooltip",{attrs:{content:"You can always change these later from your settings page in the web app",placement:"right"}},[s("i",{staticClass:"el-icon-information"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"Make my booking page available online"}},[s("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_website_published,callback:function(t){e.profile.is_website_published=t},expression:"profile.is_website_published"}}),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.profile.is_website_published,expression:"profile.is_website_published"}]},[s("span",[e._v(" Your site will be available at:\n        "),s("a",{attrs:{href:"https://bookme.guru/"+e.profile.sub_domain+"/",target:"_blank"}},[e._v("\n          https://bookme.guru/"+e._s(e.profile.sub_domain)+"/\n        ")])])])],1),e._v(" "),s("el-form-item",{attrs:{label:"Allow clients to book through the AppointmentGuru app"}},[s("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.profile.is_visible_in_app,callback:function(t){e.profile.is_visible_in_app=t},expression:"profile.is_visible_in_app"}})],1)],1)],1)},staticRenderFns:[]}},111:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{key:"whoami",attrs:{id:"whoami"}},[s("div",{staticClass:"clearfix",slot:"header"},[s("strong",{staticStyle:{"line-height":"36px"}},[e._v("Let's get started")]),e._v(" "),"auth-register"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{type:"primary"}},[e._v("Create account\n    ")]):"otp-auth"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{type:"primary"}},[e._v("Submit OTP\n    ")]):"token-auth"===e.nextStep?s("el-button",{staticClass:"action-button",attrs:{type:"primary"},on:{click:e.login}},[e._v("Login\n    ")]):s("span",[s("el-button",{staticClass:"action-button",attrs:{loading:e.requestIsLoading(e.identifyRequest),type:"primary"},on:{click:e.getId}},[e._v("Next")])],1)],1),e._v(" "),s("el-form",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.identifyRequest),expression:"requestIsLoading(identifyRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[s("i",{staticClass:"el-icon-loading"})]),e._v(" "),s("el-form-item",{attrs:{label:"Please provide your phone number"}},[s("el-input",{on:{change:e.checkPhoneLength},model:{value:e.user.phoneNumber,callback:function(t){e.user.phoneNumber=t},expression:"user.phoneNumber"}})],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["auth-register"===e.nextStep?s("el-form",[s("el-form-item",{attrs:{label:"Your full name?"}},[s("el-input",{model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"E-mail"}},[s("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Pick a password"}},[s("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1)],1):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:"auth-otp"===e.nextStep||!0===e.showOTP,expression:'nextStep === "auth-otp" || showOTP === true'}]},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.validateOtpRequest),expression:"requestIsLoading(validateOtpRequest)"}],staticClass:"pull-right",staticStyle:{"margin-top":"5px"}},[s("i",{staticClass:"el-icon-loading"})]),e._v(" "),s("el-form-item",{attrs:{label:"Please enter your OTP"}},[s("el-input",{on:{change:e.checkOTPLength},model:{value:e.user.otp,callback:function(t){e.user.otp=t},expression:"user.otp"}})],1)],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["token-auth"===e.nextStep?s("el-form",[s("el-form-item",{attrs:{label:"Please enter your password"}},[s("el-input",{model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}}),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.showOTP=!0}}},[e._v("Forgot password")])],1)],1):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:"set-password"===e.nextStep,expression:'nextStep === "set-password"'}]},[s("el-form-item",{attrs:{label:"Please set your password"}},[s("el-input",{model:{value:e.user.otp,callback:function(t){e.user.otp=t},expression:"user.otp"}})],1)],1)],1)],1)},staticRenderFns:[]}},17:function(e,t,s){var i=s(6)(s(79),s(107),null,null);e.exports=i.exports},34:function(e,t){},35:function(e,t,s){s(101);var i=s(6)(s(80),s(109),null,null);e.exports=i.exports},78:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(2),r=s(35),n=s.n(r),a=s(33),o=s.n(a),u=s(34),l=(s.n(u),s(37)),p=s(36),c=[{name:"appointmentguru",class:p.a}];i.default.use(l.a,c),i.default.use(o.a),i.default.config.productionTip=!1,new i.default({el:"#appointmentguruonboarder",template:"<App/>",components:{App:n.a}})},79:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"FieldErrorMessage",props:{request:{required:!0},field:{required:!0,type:String}},computed:{errors:function(){return!(200===this.request.status||!this.request.result||!this.request.result.data)&&this.request.result.data[this.field]}}}},80:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(104),r=s.n(i);t.default={name:"appointmentguruonboarder",components:{Onboard:r.a}}},81:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(18),r=s(17),n=s.n(r),a=s(106),o=s.n(a),u=s(105),l=s.n(u);t.default={name:"Onboard",mixins:[i.a],components:{FieldErrorMessages:n.a,WhoAmI:o.a,PractitionerPractice:l.a},data:function(){return{getIdId:null,showOTP:!1,show:!0,user:{},contacts:{},profile:{sub_domain:"",practice_name:"",is_website_published:"",is_visible_in_app:""}}},watch:{practiceName:function(){this.profile.sub_domain=this._slugify(this.practiceName)},loginRequestStatus:function(){if(200===this.loginRequestStatus){var e=this.loginRequest.result.data.token,t=[this.$appointmentguru.name,"Authorization","token "+e];this.$requeststore.commit("BACKEND_CONFIG_SET_HEADER",t),this.getMe()}}},computed:{practiceName:function(){return this.profile.practice_name},updateProfileRequest:function(){return this.$requeststore.getters.getRequestById("update-profile-request")},identifyRequest:function(){return this.$requeststore.getters.getRequestById("auth-identify-request")},loginRequest:function(){return this.$requeststore.getters.getRequestById("auth-login-request")},loginRequestStatus:function(){var e=this.loginRequest;return-1===e?0:e.status},meRequest:function(){return this.$requeststore.getters.getRequestById("me-request")},nextStep:function(){return-1!==this.identifyRequest&&this.identifyRequest.result&&this.identifyRequest.result.data?this.identifyRequest.result.data.type:null}},methods:{_requestById:function(e){return this.$requeststore.getters.getRequestById(e)},_slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},getId:function(){var e={id:"auth-identify-request",params:{phone_number:this.user.phoneNumber}};this.$appointmentguru.endpoint("auth-identify",e)},autoLogin:function(){this.user.phoneNumber="+27832566533",this.user.password="testtest",this.login()},login:function(){var e={id:"auth-login-request",data:{phone_number:this.user.phoneNumber,password:this.user.password}};this.$appointmentguru.endpoint("auth-login-phone",e)},getMe:function(){this.$appointmentguru.resource("practitioner.me.profile").id("me-request").list()},saveProfile:function(){var e=this.meRequest.result.data[0].user;this.$appointmentguru.resource("practitioner.me.profile").id("update-profile-request").save(e,this.profile)}}}},82:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(18),r=s(17),n=s.n(r);t.default={name:"Temp",mixins:[i.a],components:{FieldErrorMessages:n.a},props:{initialData:{type:Object,default:function(){return{}}}},data:function(){return{profile:{sub_domain:"",practice_name:"",is_website_published:"",is_visible_in_app:""}}},watch:{practiceName:function(){this.profile.sub_domain=this._slugify(this.practiceName)},initialData:function(){}},computed:{practiceName:function(){return this.profile.practice_name},updateProfileRequest:function(){return this.$requeststore.getters.getRequestById("update-profile-request")}},methods:{_slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},saveProfile:function(){this.$appointmentguru.resource("practitioner.me.profile").id("update-profile-request").save(1,this.profile)}}}},83:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(18),r=s(17),n=s.n(r);t.default={name:"WhoAmI",mixins:[i.a],components:{FieldErrorMessages:n.a},props:{initialData:{type:Object,default:function(){return{}}}},data:function(){return{showOTP:!1,user:{phoneNumber:"+27"}}},watch:{loginRequestStatus:function(){if(200===this.loginRequestStatus){var e=this.loginRequest.result.data.token;this.setToken(e),this.$emit("whoami:loggedin")}},validateOtpRequestStatus:function(){if(200===this.validateOtpRequestStatus){var e=this.validateOtpRequest.result.data.token;this.setToken(e),this.$emit("whoami:loggedin")}}},computed:{identifyRequest:function(){return this.$requeststore.getters.getRequestById("auth-identify-request")},loginRequest:function(){return this.$requeststore.getters.getRequestById("auth-login-request")},loginRequestStatus:function(){var e=this.loginRequest;return-1===e?0:e.status},validateOtpRequest:function(){return this.$requeststore.getters.getRequestById("auth-validate-otp")},validateOtpRequestStatus:function(){var e=this.validateOtpRequest;return-1===e?0:e.status},nextStep:function(){return-1!==this.identifyRequest&&this.identifyRequest.result&&this.identifyRequest.result.data?this.identifyRequest.result.data.type:null}},methods:{getId:function(){var e={id:"auth-identify-request",params:{phone_number:this.user.phoneNumber}};this.$appointmentguru.endpoint("auth-identify",e)},checkPhoneLength:function(){12===this.user.phoneNumber.length&&this.getId()},checkOTPLength:function(){4===this.user.otp.length&&this.validateOTP()},login:function(){var e={id:"auth-login-request",data:{phone_number:this.user.phoneNumber,password:this.user.password}};this.$appointmentguru.endpoint("auth-login-phone",e)},validateOTP:function(){var e={id:"auth-validate-otp",data:{phone_number:this.user.phoneNumber,otp:this.user.otp}};this.$appointmentguru.endpoint("auth-validate-otp",e)},autoLogin:function(){this.user.phoneNumber="+27...",this.user.password="...",this.login()},setToken:function(e){var t=[this.$appointmentguru.name,"Authorization","token "+e];this.$requeststore.commit("BACKEND_CONFIG_SET_HEADER",t)}}}}},[78]);
//# sourceMappingURL=app.fe27f2e25257fd2582ea.js.map